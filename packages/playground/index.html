<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Legumes Playground</title>

    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.css">
    <link rel="stylesheet" href="https://codemirror.net/theme/solarized.css">

    <!-- Custom styles for CodeMirror -->
    <style>
      .cm-s-solarized.CodeMirror {
        box-shadow: none;
      }
      .CodeMirror {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="root" style="background:floralwhite;overflow:hidden"></div>

    <!-- External dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/mode/simple.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/search/search.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.7/build/dat.gui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.17/Tone.js"></script>

    <!-- CodeMirror comment addon -->
    <script>
      !function(){"use strict";var e={},n=/[^\s\u00a0]/,t=CodeMirror.Pos;function i(e){var t=e.search(n);return-1==t?0:t}CodeMirror.commands.toggleComment=function(e){var n=e.getCursor("start"),t=e.getCursor("end");e.uncomment(n,t)||e.lineComment(n,t)},CodeMirror.defineExtension("lineComment",function(o,l,r){r||(r=e);var a=this,m=CodeMirror.innerMode(a.getMode(),a.getTokenAt(o).state).mode,c=r.lineComment||m.lineComment;if(c){var g=a.getLine(o.line);if(null!=g){var d=Math.min(0!=l.ch||l.line==o.line?l.line+1:l.line,a.lastLine()+1),s=null==r.padding?" ":r.padding,f=r.commentBlankLines;a.operation(function(){if(r.indent)for(var e=g.slice(0,i(g)),l=o.line;l<d;++l){var m=a.getLine(l),C=e.length;(f||n.test(m))&&(m.slice(0,C)!=e&&(C=i(m)),a.replaceRange(e+c+s,t(l,0),t(l,C)))}else for(l=o.line;l<d;++l)(f||n.test(a.getLine(l)))&&a.replaceRange(c+s,t(l,0))})}}else(r.blockCommentStart||m.blockCommentStart)&&(r.fullLines=!0,a.blockComment(o,l,r))}),CodeMirror.defineExtension("blockComment",function(i,o,l){l||(l=e);var r=this,a=CodeMirror.innerMode(r.getMode(),r.getTokenAt(i).state).mode,m=l.blockCommentStart||a.blockCommentStart,c=l.blockCommentEnd||a.blockCommentEnd;if(m&&c){var g=Math.min(o.line,r.lastLine());g!=i.line&&0==o.ch&&n.test(r.getLine(g))&&--g;var d=null==l.padding?" ":l.padding;i.line>g||r.operation(function(){if(0!=l.fullLines){var e=n.test(r.getLine(g));r.replaceRange(d+c,t(g)),r.replaceRange(m+d,t(i.line,0));var s=l.blockCommentLead||a.blockCommentLead;if(null!=s)for(var f=i.line+1;f<=g;++f)(f!=g||e)&&r.replaceRange(s+d,t(f,0))}else r.replaceRange(c,o),r.replaceRange(m,i)})}else(l.lineComment||a.lineComment)&&0!=l.fullLines&&r.lineComment(i,o,l)}),CodeMirror.defineExtension("uncomment",function(i,o,l){l||(l=e);var r=this,a=CodeMirror.innerMode(r.getMode(),r.getTokenAt(i).state).mode,m=Math.min(o.line,r.lastLine()),c=Math.min(i.line,m),g=l.lineComment||a.lineComment,d=[],s=null==l.padding?" ":l.padding;e:for(;g;){for(var f=c;f<=m;++f){var C=r.getLine(f),u=C.indexOf(g);if(-1==u&&(f!=m||f==c)&&n.test(C))break e;if(f!=c&&u>-1&&n.test(C.slice(0,u)))break e;d.push(C)}return r.operation(function(){for(var e=c;e<=m;++e){var n=d[e-c],i=n.indexOf(g),o=i+g.length;i<0||(n.slice(o,o+s.length)==s&&(o+=s.length),r.replaceRange("",t(e,i),t(e,o)))}}),!0}var v=l.blockCommentStart||a.blockCommentStart,h=l.blockCommentEnd||a.blockCommentEnd;if(!v||!h)return!1;var k=l.blockCommentLead||a.blockCommentLead,p=r.getLine(c),L=m==c?p:r.getLine(m),b=p.indexOf(v),M=L.lastIndexOf(h);return-1==M&&c!=m&&(L=r.getLine(--m),M=L.lastIndexOf(h)),-1!=b&&-1!=M&&(r.operation(function(){r.replaceRange("",t(m,M-(s&&L.slice(M-s.length,M)==s?s.length:0)),t(m,M+h.length));var e=b+v.length;if(s&&p.slice(e,e+s.length)==s&&(e+=s.length),r.replaceRange("",t(c,b),t(c,e)),k)for(var i=c+1;i<=m;++i){var o=r.getLine(i),l=o.indexOf(k);if(-1!=l&&!n.test(o.slice(0,l))){var a=l+k.length;s&&o.slice(a,a+s.length)==s&&(a+=s.length),r.replaceRange("",t(i,l),t(i,a))}}}),!0)})}();
    </script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
